{% extends "base.html" %}

{% block title %}Dashboard{% endblock %}

{% block content %}

<h1 class="text-2xl font-bold mb-4 text-blue-600 flex items-center gap-2">
    üì° D·ªØ li·ªáu NMEA m·ªõi nh·∫•t
</h1>

<div id="nmea" class="bg-white rounded-xl shadow p-6 space-y-2 border border-gray-200">
    <!-- D·ªØ li·ªáu s·∫Ω hi·ªÉn th·ªã ·ªü ƒë√¢y -->
</div>

<script>
async function fetchData() {
    const res = await fetch('/data');
    const { nmea_data, pixhawk_data } = await res.json();

    let html = '';

    for (let key in nmea_data) {
        html += `
        <div class="flex justify-between border-b border-gray-100 py-1">
            <span class="font-medium text-gray-600">${key}</span>
            <span class="text-right text-gray-800">${nmea_data[key]}</span>
        </div>`;
    }

    for (let key in pixhawk_data) {
        html += `
        <div class="flex justify-between border-b border-gray-100 py-1">
            <span class="font-medium text-gray-600">${key}</span>
            <span class="text-right text-gray-800">${pixhawk_data[key]}</span>
        </div>`;
    }

    document.getElementById('nmea').innerHTML = html;
}

setInterval(fetchData, 1000);  // c·∫≠p nh·∫≠t m·ªói gi√¢y
fetchData(); // l·∫ßn ƒë·∫ßu g·ªçi
</script>

{% endblock %}
